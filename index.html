<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Roblox Profile Checker</title>

  <style>
    /* ----------- RESET ----------- */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: "Segoe UI", sans-serif;
    }

    body {
      background: #f3f4f6;
      color: #1f2937;
      display: flex;
      min-height: 100vh;
    }

    /* ----------- SIDEBAR ----------- */
    .sidebar {
      width: 240px;
      background: #111827;
      color: #e5e7eb;
      padding: 25px 15px;
      display: flex;
      flex-direction: column;
      animation: fadeInSidebar 0.5s ease;
    }

    @keyframes fadeInSidebar {
      from { opacity: 0; transform: translateX(-20px); }
      to { opacity: 1; transform: translateX(0); }
    }

    .sidebar h1 {
      font-size: 24px;
      margin-bottom: 30px;
      text-align: center;
      color: #fff;
      letter-spacing: 0.5px;
    }

    .nav {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .nav a {
      color: #e5e7eb;
      text-decoration: none;
      padding: 12px 14px;
      border-radius: 10px;
      transition: 0.2s;
      font-size: 16px;
    }

    .nav a:hover {
      background: #1f2937;
    }

    .nav a.active {
      background: #2563eb;
      font-weight: bold;
    }

    /* ----------- MAIN CONTENT ----------- */
    .main {
      flex: 1;
      padding: 40px 50px;
      animation: fadeIn 0.5s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .header {
      font-size: 28px;
      font-weight: 700;
      margin-bottom: 25px;
    }

    .card {
      background: white;
      padding: 30px;
      border-radius: 16px;
      box-shadow: 0 4px 18px rgba(0,0,0,0.07);
      width: 100%;
      max-width: 700px;
    }

    label {
      font-weight: 600;
      color: #374151;
      margin-top: 12px;
      display: block;
    }

    input {
      width: 100%;
      padding: 14px;
      margin-top: 8px;
      border-radius: 10px;
      border: 1px solid #d1d5db;
      font-size: 16px;
      transition: 0.2s;
    }

    input:focus {
      border-color: #2563eb;
      outline: none;
      box-shadow: 0 0 0 2px rgba(37,99,235,0.25);
    }

    button {
      width: 100%;
      padding: 14px;
      margin-top: 20px;
      border: none;
      border-radius: 10px;
      background: #2563eb;
      color: white;
      font-size: 17px;
      font-weight: 600;
      cursor: pointer;
      transition: 0.2s;
    }

    button:hover {
      background: #1e40af;
    }

    #output {
      margin-top: 25px;
      white-space: pre-wrap;
      background: #f9fafb;
      padding: 20px;
      border-radius: 12px;
      border: 1px solid #e5e7eb;
      min-height: 150px;
      font-size: 15px;
      line-height: 1.5;
    }

    /* --------- MOBILE --------- */
    @media (max-width: 900px) {
      .sidebar {
        display: none;
      }
      .main {
        padding: 25px 20px;
      }
    }
  </style>
</head>

<body>

  <!-- SIDEBAR -->
  <div class="sidebar">
    <h1>Profile Tools</h1>

    <div class="nav">
      <a class="active" href="#">Roblox Profile Checker</a>
      <a href="#">Group Finder</a>
      <a href="#">Account Lookup</a>
      <a href="#">Settings</a>
    </div>
  </div>

  <!-- MAIN CONTENT -->
  <div class="main">
    <div class="header">Roblox Profile Checker</div>

    <div class="card">
      <label>Insert Roblox Username:</label>
      <input id="username" type="text" placeholder="e.g. Builderman" />

      <button onclick="search()">Search</button>

      <div id="output"></div>
    </div>
  </div>

  <!-- ORIGINAL JS (unchanged) -->
  <script>
    const backendURL = "https://roblox-backend-rugl.onrender.com";

    async function fetchJSON(url, options) {
      const res = await fetch(url, options);
      if (!res.ok) throw new Error(`HTTP error ${res.status}`);
      return res.json();
    }

    async function safeFetch(url) {
      try {
        return await fetchJSON(url);
      } catch {
        return null;
      }
    }

    async function fetchExtraInfo(userId) {
      const friends = await safeFetch(`${backendURL}/api/friends/${userId}`);
      const badges = await safeFetch(`${backendURL}/api/badges/${userId}`);
      const presence = await safeFetch(`${backendURL}/api/presence/${userId}`);
      const followers = await safeFetch(`${backendURL}/api/followers/${userId}`);
      const groups = await safeFetch(`${backendURL}/api/groups/${userId}`);

      let extra = "\n\n";

      extra += `ðŸ”¹ Friends: ${friends?.count ?? "Unavailable"}\n`;

      extra += `\nðŸ”¹ Badges (${badges?.data?.length ?? 0}):\n`;
      if (badges?.data?.length) {
        badges.data.slice(0, 5).forEach(b => extra += ` - ${b.name}\n`);
      } else extra += " - None\n";

      extra += `\nðŸ”¹ Presence: ${
        presence?.userPresences?.[0]?.userPresenceType === 0 
        ? "Offline" 
        : "Online"
      }\n`;

      extra += `\nðŸ”¹ Followers: ${followers?.count ?? "Unavailable"}\n`;

      extra += `\nðŸ”¹ Last 5 Groups:\n`;
      if (groups?.data?.length) {
        groups.data.forEach(g => {
          extra += ` - ${g.group.name}\n   Members: ${g.group.memberCount}\n   Owner: ${g.group.owner.username}\n\n`;
        });
      } else extra += " - None\n";

      return extra;
    }

    async function search() {
      const username = document.getElementById("username").value.trim();
      const output = document.getElementById("output");

      if (!username) {
        output.textContent = "Please enter a username.";
        return;
      }

      output.textContent = "Fetching info...";

      try {
        const userData = await fetchJSON(`${backendURL}/api/userid`, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ usernames: [username] }),
        });

        if (!userData.data?.length) {
          output.textContent = "User not found.";
          return;
        }

        const id = userData.data[0].id;
        const info = await fetchJSON(`${backendURL}/api/user/${id}`);

        let result =
`ðŸ§¾ Display Name: ${info.displayName}
ðŸ”¢ User ID: ${info.id}
ðŸ“„ Bio: ${info.description || "None"}
ðŸ“… Account Created: ${new Date(info.created).toLocaleDateString()}`;

        result += await fetchExtraInfo(id);

        output.textContent = result;
      } catch (err) {
        output.textContent = "An error occurred.";
      }
    }
  </script>

</body>
</html>
